[gcode_shell_command cleanup_files]
command: $HOME/pellcorp/tools/cleanup-files.sh
timeout: 60
verbose: True

[gcode_macro CLEANUP_FILES]
description: Cleanup Backup Config files
gcode:
    RUN_SHELL_COMMAND CMD=cleanup_files PARAMS="--client"

[gcode_shell_command support_zip]
command: $HOME/pellcorp/tools/support.sh
timeout: 60
verbose: True

[gcode_macro SUPPORT_ZIP]
description: Generate support.zip
gcode:
    RUN_SHELL_COMMAND CMD=support_zip

[gcode_shell_command config_overrides]
command: $HOME/pellcorp/tools/config-overrides.sh
timeout: 600.0
verbose: True

[gcode_macro CONFIG_OVERRIDES]
gcode:
  RUN_SHELL_COMMAND CMD=config_overrides

[gcode_shell_command systemctl]
command: sudo /usr/bin/systemctl
timeout: 10
verbose: False

[gcode_macro STOP_CAMERA]
description: Stop camera
gcode:
    G4 P1000
    RUN_SHELL_COMMAND CMD=systemctl PARAMS="stop crowsnest"
    RESPOND TYPE=command MSG='Camera stopped'
    SET_GCODE_VARIABLE MACRO=START_CAMERA VARIABLE=started VALUE=False


[gcode_macro START_CAMERA]
variable_started: True
description: Start camera
gcode:
    G4 P1000
    RUN_SHELL_COMMAND CMD=systemctl PARAMS="start crowsnest"
    RESPOND TYPE=command MSG='Camera started'
    SET_GCODE_VARIABLE MACRO=START_CAMERA VARIABLE=started VALUE=True


[gcode_macro BEEP]
description: Play the beep sound
gcode:


[gcode_shell_command calibrate_shaper]
command: $HOME/klipper/scripts/calibrate_shaper.py
timeout: 600.0
verbose: True

[gcode_shell_command usbreset]
command: $HOME/pellcorp/tools/usb_reset.sh
timeout: 20
verbose: True
