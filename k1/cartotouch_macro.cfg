[gcode_macro BED_MESH_CALIBRATE]
rename_existing: _BED_MESH_CALIBRATE
variable_stop_start_camera: False
gcode:
    G4 P1000
    {% if stop_start_camera %}
        STOP_CAMERA
    {% endif %}
    G4 P500
    _BED_MESH_CALIBRATE {rawparams}
    G4 P500
    {% if stop_start_camera %}
        START_CAMERA
    {% endif %}
    G4 P1000


[gcode_macro AXIS_TWIST_COMPENSATION_CALIBRATE]
rename_existing: _AXIS_TWIST_COMPENSATION_CALIBRATE
variable_stop_start_camera: False
gcode:
    {% if stop_start_camera %}
        STOP_CAMERA
    {% endif %}
    G4 P1000
    _AXIS_TWIST_COMPENSATION_CALIBRATE {rawparams}
    G4 P1000
    {% if stop_start_camera %}
        RESPOND TYPE=command MSG='You need to run START_CAMERA on completion'
    {% endif %}


[gcode_macro SCREWS_TILT_CALCULATE]
rename_existing: _SCREWS_TILT_CALCULATE
variable_stop_start_camera: False
gcode:
    {% if stop_start_camera %}
        STOP_CAMERA
    {% endif %}
    G4 P1000
    _SCREWS_TILT_CALCULATE {rawparams}
    G4 P1000
    {% if stop_start_camera %}
        START_CAMERA
    {% endif %}
